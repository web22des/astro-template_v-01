<!DOCTYPE html><html lang="ru" class="light"> <head><meta charset="utf-8"><!-- Базовые иконки --><link rel="icon" href="/favicon/favicon.ico" sizes="any"><link rel="icon" href="/favicon/favicon.svg" type="image/svg+xml"><!-- Адаптивные иконки --><link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png"><link rel="manifest" href="/favicon/site.webmanifest"><title>Клиентский JS внутри компонента (для интерактивности)</title><link rel="stylesheet" href="/astro-template_v-01/assets/post01-CvHtc6ge.css"></head> <body class="wrapper"> <header class="header" data-astro-cid-x3onawaz> <div class="header__container" data-astro-cid-x3onawaz> <nav class="header__nav" data-astro-cid-x3onawaz> <ul class="header__menu" data-astro-cid-x3onawaz> <li class="header__menu-item" data-astro-cid-x3onawaz><a href="/astro-template_v-01/" data-astro-cid-x3onawaz="true"> Главная </a></li> <li class="header__menu-item" data-astro-cid-x3onawaz><a href="/astro-template_v-01/posts/" data-astro-cid-x3onawaz="true"> Посты </a></li> <li class="header__menu-item" data-astro-cid-x3onawaz><a href="/astro-template_v-01/contacts/" data-astro-cid-x3onawaz="true"> Мои контакты </a></li> </ul> </nav> <div class="header__theme-togle" data-astro-cid-x3onawaz> <script>
  (function() {
    // Функция для установки темы
    function setTheme(theme) {
      document.body.classList.remove('light', 'dark');
      document.body.classList.add(theme);
      localStorage.setItem('theme', theme);
      
      // Обновляем чекбокс
      const toggle = document.getElementById('theme-toggle');
      if (toggle) {
        toggle.checked = theme === 'dark';
      }
    }

    // Функция для определения начальной темы
    function initTheme() {
      // Проверяем классы на body
      if (document.body.classList.contains('light')) {
        return 'light';
      }
      if (document.body.classList.contains('dark')) {
        return 'dark';
      }
      
      // Проверяем localStorage
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        return savedTheme;
      }
      
      // Проверяем системные настройки
      return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches 
        ? 'dark' 
        : 'light';
    }

    // Инициализация темы
    const currentTheme = initTheme();
    setTheme(currentTheme);

    // Обработчик переключения темы
    document.addEventListener('DOMContentLoaded', () => {
      const toggle = document.getElementById('theme-toggle');
      if (toggle) {
        toggle.checked = currentTheme === 'dark';
        
        toggle.addEventListener('change', (e) => {
          setTheme(e.target.checked ? 'dark' : 'light');
        });
      }
    });

    // Следим за изменениями системных настроек (если тема не выбрана явно)
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
      if (!localStorage.getItem('theme')) {
        setTheme(e.matches ? 'dark' : 'light');
      }
    });
  })();
</script><div class="theme-toggle" data-astro-cid-lfoluaxz> <input type="checkbox" id="theme-toggle" class="theme-toggle__input" data-astro-cid-lfoluaxz> <label for="theme-toggle" class="theme-toggle__slider" data-astro-cid-lfoluaxz></label> </div> <div class="contacts-icons"> <a href="tel:+71234567890" class="contacts-icons__link contacts-icons__link--phone" aria-label="Позвонить по телефону"> <span class="contacts-icons__icon" aria-hidden="true"> <span class="_icon-phone"></span> </span> <span class="visually-hidden">+7 (123) 456-78-90</span> </a> <a href="https://wa.me/71234567890" class="contacts-icons__link contacts-icons__link--whatsapp" aria-label="Написать в WhatsApp" target="_blank" rel="noopener noreferrer"> <span class="contacts-icons__icon" aria-hidden="true"> <span class="_icon-whatsapp"></span> </span> <span class="visually-hidden">WhatsApp</span> </a> <a href="https://t.me/username" class="contacts-icons__link contacts-icons__link--telegram" aria-label="Написать в Telegram" target="_blank" rel="noopener noreferrer"> <span class="contacts-icons__icon" aria-hidden="true"> <span class="_icon-telegram"></span> </span> <span class="visually-hidden">Telegram</span> </a> </div> <!--  -->  </div> </div> </header> <!--  -->  <article class="markdown__container page"> <h2 id="1-клиентский-js-внутри-компонента-для-интерактивности">1. Клиентский JS внутри компонента (для интерактивности)</h2>
<p>Используйте <code>&#x3C;script></code> тег в вашем <strong>.astro</strong> файле:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="astro"><code><span class="line"><span style="color:#6A737D">---</span></span>
<span class="line"><span style="color:#6A737D">// Серверный код (выполняется при сборке)</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> serverData</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> fetchData</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#6A737D">---</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- Разметка --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"my-button"</span><span style="color:#E1E4E8">>Click me&#x3C;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- Клиентский JavaScript --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">  // Этот код выполняется в браузере</span></span>
<span class="line"><span style="color:#E1E4E8">  document.</span><span style="color:#B392F0">querySelector</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'.my-button'</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'click'</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">    alert</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Button clicked!'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  });</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- Стили --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">style</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#B392F0">  .my-button</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">    background</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">blue</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#79B8FF">    color</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">white</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">style</span><span style="color:#E1E4E8">></span></span></code></pre>
<h4 id="когда-использовать">Когда использовать:</h4>
<ul>
<li>
<p>Для простой интерактивности (клики, анимации)</p>
</li>
<li>
<p>Если не нужны сложные состояния или фреймворки (React/Vue)</p>
</li>
</ul>
<h2 id="2-отдельный-js-файл-для-сложной-логики">2. Отдельный JS-файл для сложной логики</h2>
<p>Если кода много, вынесите его в отдельный файл:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="txt"><code><span class="line"><span>src/</span></span>
<span class="line"><span>├── components/</span></span>
<span class="line"><span>│   └── Button.astro</span></span>
<span class="line"><span>│   └── Button.client.js  # Клиентский код</span></span></code></pre>
<h4 id="buttonastro">Button.astro:</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#6A737D">// Этот код будет загружен только в браузере</span></span>
<span class="line"><span style="color:#E1E4E8">document.</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"DOMContentLoaded"</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    document.</span><span style="color:#B392F0">querySelector</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">".my-button"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">addEventListener</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"click"</span><span style="color:#E1E4E8">, () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"Clicked!"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<h4 id="плюсы">Плюсы:</h4>
<ul>
<li>
<p>Чистая разделенность кода</p>
</li>
<li>
<p>Легче поддерживать</p>
</li>
<li>
<p>Можно использовать TypeScript</p>
</li>
</ul>
<h2 id="3-использование-фреймворков-react-vue-и-тд">3. Использование фреймворков (React, Vue и т.д.)</h2>
<p>Если нужен сложный интерактив, подключите фреймворк:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { useState } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> "react"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> Button</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">count</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setCount</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#85E89D">button</span><span style="color:#B392F0"> onClick</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{() </span><span style="color:#F97583">=></span><span style="color:#B392F0"> setCount</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">c</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> c </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">)}>Clicks: {count}&#x3C;/</span><span style="color:#85E89D">button</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h4 id="buttonastro-1">Button.astro:</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="astro"><code><span class="line"><span style="color:#6A737D">---</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> Button </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> './Button.tsx'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#6A737D">---</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">Button</span><span style="color:#B392F0"> client:load</span><span style="color:#E1E4E8"> /></span></span></code></pre>
<h4 id="когда-использовать-1">Когда использовать:</h4>
<ul>
<li>
<p>Для сложных интерактивных компонентов</p>
</li>
<li>
<p>Если нужны состояния (state)</p>
</li>
<li>
<p>При интеграции с существующим React/Vue кодом</p>
</li>
</ul>
<h4 id="4-лучшие-практики">4. Лучшие практики</h4>
<ol>
<li>
<p>Для простого кода - пишите прямо в <code>&#x3C;script></code> в <strong>.astro файле</strong></p>
</li>
<li>
<p>Для среднего кода - выносите в <strong>.client.js</strong> файлы</p>
</li>
<li>
<p>Для сложных компонентов - используйте фреймворки (React/Vue/Svelte)</p>
</li>
<li>
<p>Оптимизация:</p>
</li>
</ol>
<ul>
<li>
<p>client:load - загрузить сразу (по умолчанию)</p>
</li>
<li>
<p>client:idle - загрузить когда браузер простаивает</p>
</li>
<li>
<p>client:visible - загрузить когда компонент появляется в viewport</p>
</li>
</ul>
<h2 id="пример-полной-структуры">Пример полной структуры</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="txt"><code><span class="line"><span>src/</span></span>
<span class="line"><span>├── components/</span></span>
<span class="line"><span>│   ├── SimpleButton.astro          # Простой компонент с inline JS</span></span>
<span class="line"><span>│   ├── ComplexButton.client.js     # Отдельный JS файл</span></span>
<span class="line"><span>│   └── ReactButton.tsx            # React компонент</span></span>
<span class="line"><span>└── pages/</span></span>
<span class="line"><span>    └── index.astro                # Страница</span></span></code></pre>
<h4 id="indexastro">index.astro:</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="astro"><code><span class="line"><span style="color:#6A737D">---</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> SimpleButton </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '../components/SimpleButton.astro'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> ComplexButton </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '../components/ComplexButton.client.js'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> ReactButton </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> '../components/ReactButton.tsx'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#6A737D">---</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">SimpleButton</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">ComplexButton</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#79B8FF">ReactButton</span><span style="color:#B392F0"> client:load</span><span style="color:#E1E4E8"> /></span></span></code></pre>
<h2 id="вывод">Вывод</h2>
<ol>
<li>
<p>Немного JS - пишите прямо в компоненте <code>(&#x3C;script>)</code></p>
</li>
<li>
<p>Средний JS - выносите в <strong>.client.js</strong> файлы</p>
</li>
<li>
<p>Сложный JS - используйте фреймворки (React/Vue)</p>
</li>
<li>
<p>Всегда указывайте стратегию загрузки (<code>client:load/idle/visible</code>)</p>
</li>
</ol>
<p>Это обеспечит оптимальную производительность и чистоту кода.</p> <!-- Сюда вставится содержимое .md --> </article> <footer class="footer"> <div class="footer__container"> <p>Footer</p> </div> </footer> </body></html>